"""Used to start a new mission or stop an active mission

Attributes:
    STUB (mission_service_pb2_grpc.MissionStub): stub that is automatically set at runtime so that actions
        for this service can connect to gRPC
"""

###############################################################
# NOTE: THIS FILE IS GENERATED BY GENERATE_API.PY. DO NOT EDIT!
###############################################################
from typing import Optional, List
from google.protobuf.timestamp_pb2 import Timestamp
from google.protobuf.duration_pb2 import Duration
from google.protobuf.json_format import ParseDict
from enum import Enum
# API imports
from ...base import Action, Datatype
from ....dsl.compiler.registry import register_action
from ..native import run_unary, run_streaming, payload_from_action
# Protobuf imports
from ....protocol.services import mission_service_pb2
from ....protocol.services import mission_service_pb2_grpc
# Type imports
from ...datatypes.common import Response
from ...datatypes import mission as params
from ...datatypes import common as common

STUB: mission_service_pb2_grpc.MissionStub = None

@register_action
class Upload(Action):
    """Upload a mission for execution

    Attributes:
        mission (params.MissionData): Data of the target mission
    """
    mission: params.MissionData

    async def execute(self) -> Response:
        """Execute the Upload action.

        Returns:
            Response: response generated by the RPC call.
        """
        req = mission_service_pb2.UploadRequest()
        ParseDict(payload_from_action(self), req)
        return await run_unary(STUB.Upload, req)

@register_action
class Start(Action):
    """Start an uploaded mission
    """

    async def execute(self) -> Response:
        """Execute the Start action.

        Returns:
            Response: response generated by the RPC call.
        """
        req = mission_service_pb2.StartRequest()
        ParseDict(payload_from_action(self), req)
        return await run_unary(STUB.Start, req)

@register_action
class Stop(Action):
    """Stop the current mission
    """

    async def execute(self) -> Response:
        """Execute the Stop action.

        Returns:
            Response: response generated by the RPC call.
        """
        req = mission_service_pb2.StopRequest()
        ParseDict(payload_from_action(self), req)
        return await run_unary(STUB.Stop, req)

@register_action
class Notify(Action):
    """Send a notification to the current mission

    Attributes:
        notify_code (int): Integer notification code, generated by the backend
    """
    notify_code: int

    async def execute(self) -> Response:
        """Execute the Notify action.

        Returns:
            Response: response generated by the RPC call.
        """
        req = mission_service_pb2.NotifyRequest()
        ParseDict(payload_from_action(self), req)
        return await run_unary(STUB.Notify, req)

@register_action
class ConfigureTelemetryStream(Action):
    """Set the mission telemetry stream parameters

    Attributes:
        frequency (int): Target frequency for telemetry stream
    """
    frequency: int

    async def execute(self) -> Response:
        """Execute the ConfigureTelemetryStream action.

        Returns:
            Response: response generated by the RPC call.
        """
        req = mission_service_pb2.ConfigureTelemetryStreamRequest()
        ParseDict(payload_from_action(self), req)
        return await run_unary(STUB.ConfigureTelemetryStream, req)

