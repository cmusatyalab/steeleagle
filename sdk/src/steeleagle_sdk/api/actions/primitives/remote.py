"""Used to control a vehicle remotely over ZeroMQ, usually hosted
on the server

Attributes:
    STUB (remote_service_pb2_grpc.RemoteStub): stub that is automatically set at runtime so that actions
        for this service can connect to gRPC
"""

###############################################################
# NOTE: THIS FILE IS GENERATED BY GENERATE_API.PY. DO NOT EDIT!
###############################################################
from typing import Optional, List
from google.protobuf.timestamp_pb2 import Timestamp
from google.protobuf.duration_pb2 import Duration
from google.protobuf.json_format import ParseDict
from enum import Enum
# API imports
from ...base import Action, Datatype
from ....dsl.compiler.registry import register_action
from ..native import run_unary, run_streaming, payload_from_action
# Protobuf imports
from ....protocol.services import remote_service_pb2
from ....protocol.services import remote_service_pb2_grpc
# Type imports
from ...datatypes.common import Response
from ...datatypes import remote as params
from ...datatypes import common as common

STUB: remote_service_pb2_grpc.RemoteStub = None

@register_action
class Command(Action):
    """Sends a service request to a vehicle core service (Control, Mission, etc.)
    over ZeroMQ and returns the response

    Attributes:
        sequence_number (Optional[int]): Since command sequencing is not built-in to ZeroMQ, it must be done manually; this will be set automatically by the server
        request (Any): Contains request data for an RPC call
        method_name (str): Fully qualified method name
        identity (str): Identity of the sender
        vehicle_id (str): Target vehicle to send to
    """
    sequence_number: Optional[int]
    request: Any
    method_name: str
    identity: str
    vehicle_id: str

    async def execute(self) -> Response:
        """Execute the Command action.

        Returns:
            Response: response generated by the RPC call.
        """
        req = remote_service_pb2.CommandRequest()
        ParseDict(payload_from_action(self), req)
        return await run_streaming(STUB.Command, req)

@register_action
class CompileMission(Action):
    """

    Attributes:
        dsl_content (str)    """
    dsl_content: str

    async def execute(self) -> Response:
        """Execute the CompileMission action.

        Returns:
            Response: response generated by the RPC call.
        """
        req = remote_service_pb2.CompileMissionRequest()
        ParseDict(payload_from_action(self), req)
        return await run_unary(STUB.CompileMission, req)

